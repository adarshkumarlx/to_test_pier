<?xml version="1.0" encoding="utf-8"?><!DOCTYPE topic  PUBLIC '-//OASIS//DTD DITA Topic//EN'  'topic.dtd'><topic id="GUID_F87EFF87-165A-4A83-9CEF-BD9F7999DC9B"><title>SPI0 3-Load Branch (Device Down) with G3 Isolation FET of Flash and TPM Topology</title><body><section id="SECTION_7143FA18-8A83-41CC-BEA4-F40DFBC8BD14"><fig id="FIG_spi0_3-load_branch_device_down_with_g3_isolation_fet_of_flash_sharing_and_tpm_topology_diagram_1"><title>SPI0 3-Load Branch (Device Down) with G3 Isolation FET of Flash Sharing and TPM Topology Diagram</title><image href="FIG_spi0 3-load branch (device down) with g3 isolation fet of flash sharing and tpm topology diagram_1.jpg" scalefit="yes" id="IMG_spi0_3-load_branch_device_down_with_g3_isolation_fet_of_flash_sharing_and_tpm_topology_diagram_1_jpg" /></fig><table id="TABLE_7143FA18-8A83-41CC-BEA4-F40DFBC8BD14_1"><title>SPI0 3-Load Branch (Device Down) with G3 Isolation FET of Flash and TPM Topology Notes</title><tgroup cols="2"><thead><row><entry>Note</entry><entry>Detail</entry></row></thead><tbody><row><entry><p>Reference plane</p></entry><entry><p>Continuous ground only.</p></entry></row><row><entry><p>Max frequency</p></entry><entry><p>Option 1: Segment Lengths for Maximum 80 MHz</p><p>Flash: 76.8 MHz; TPM: 14.3 MHz; Debug Tool: 12 MHz; EC: 50 MHz</p><p /><p>Option 2: Segment Lengths for Maximum 50 MHz</p><p>Flash 50 MHz; TPM: 33 MHz; EC: 50 MHz</p></entry></row><row><entry><p>R1 (50 MHz)</p></entry><entry><p>30 Ω ± 5%. </p><p>To be placed within 10.16mm from the branch on SPI0_CLK, SPI0_MISO, SPI0_MOSI, SPI0_IO2 and SPI0_IO3.</p></entry></row><row><entry><p>R2 (50 MHz)</p></entry><entry><p>51 Ω ± 5%.</p><p>To be placed within 10.16 mm from the branch on SPI0_CLK, SPI0_MISO, SPI0_MOSI, SPI0_IO2 and SPI0_IO3.</p></entry></row><row><entry><p>R1 (76.8 MHz)</p></entry><entry><p>10 Ω  ± 10%.</p><p>To be placed within 10.16 mm from the branch on SPI0_CLK, SPI0_MISO, SPI0_MOSI, SPI0_IO2 and SPI0_IO3.</p></entry></row><row><entry><p>R2 (76.8 MHz)</p></entry><entry><p>430 Ω ± 10%. </p><p>To be placed within 10.16 mm from the branch on SPI0_CLK, SPI0_MISO, SPI0_MOSI, SPI0_IO2 and SPI0_IO3.</p></entry></row><row><entry><p>Length from CPU to flash 1</p></entry><entry><p>Length from CPU to flash 1: </p><p>= BO + M1 + M2 + M3 + M4</p></entry></row><row><entry><p>Flash device electrical characteristics recommendation for 50MHz support: Option 1</p></entry><entry><p>[1] Driver strength spec: 40 Ω or stronger across worse case corners.</p><p>[2] 0.4 ns ≤ rise/ fall time measured at 30% to 70% ≤ 1.25 ns based on 30 pF test load. </p><p>[3] Output capacitance, Cout ≤ 14 pF (including RPMC die).</p><p>[4] Input capacitance, Cin ≤ 12 pF (including RPMC die).</p><p>[5] Data input setup time ≤ 3 ns.</p><p>[6] Data input hold time ≤ 3 ns.</p><p>[7] CLK to DATA output valid time, min: 1 ns, based on 30 pF test load.</p><p>[8] CLK to DATA output valid time, max: 9 ns (50% to 50%), based on 30 pF test load.</p></entry></row><row><entry><p>Flash device electrical characteristics recommendation for 50MHz support: Option 2</p></entry><entry><p>[1] Driver strength spec: 50 Ω or stronger across worse case corners.</p><p>[2] 0.4 ns ≤ rise/ fall time measured at 30% to 70% ≤ 1.45 ns based on 30 pF test load. </p><p>[3] Output capacitance, Cout ≤ 16 pF (including RPMC die).</p><p>[4] Input capacitance, Cin ≤ 12 pF (including RPMC die).</p><p>[5] Data input setup time ≤ 3 ns.</p><p>[6] Data input hold time ≤ 3 ns.</p><p>[7] CLK to DATA output valid time, min: 1 ns, based on 30 pF test load.</p><p>[8] CLK to DATA output valid time, max: 6.5 ns (50% to 50%), based on 30 pF test load.</p></entry></row><row><entry><p>Flash device electrical characteristics recommendation for 76.8MHz support:</p></entry><entry><p>[1] Driver strength spec: 50 Ω or stronger across worse case corners.</p><p>[2] 0.4 ns ≤ rise/ fall time measured at 30% to 70% ≤ 2 ns based on 30 pF test load. </p><p>[3] Output capacitance, Cout ≤ 16 pF (including RPMC die).</p><p>[4] Input capacitance, Cin ≤ 12 pF (including RPMC die).</p><p>[5] Data input setup time ≤ 1.75 ns.</p><p>[6] Data input hold time ≤ 2 ns.</p><p>[7] CLK to DATA output valid time, min: 1 ns, based on 30pF test load.</p><p>[8] CLK to DATA output valid time, max: 6 ns (50% to 50%), based on 30 pF test load.</p></entry></row><row><entry><p>Stuffing resistor</p></entry><entry><p>If one of the devices is unstuffed (rework), treat it as 2-Load topology thus place stuffing resistor as close as possible to the branch to avoid long stub length.</p></entry></row><row><entry><p>Length matching between CLK and DATA/ CS# signals</p></entry><entry><p>12.7 mm</p></entry></row><row><entry><p>Trace spacing between DATA and DATA signals</p></entry><entry><p>0.250 mm</p></entry></row><row><entry><p>Trace spacing between CLK and DATA/ other signals</p></entry><entry><p>0.375 mm</p></entry></row><row><entry><p>FET component criteria</p></entry><entry><p>Ron &lt; 4.5 Ω.</p><p>Cin &lt; 6 pF.</p></entry></row><row><entry><p>Signal name/ list</p></entry><entry><p>SPI0_CLK, SPI0_MOSI, SPI0_MISO, SPI0_IO2, SPI0_IO3, SPI0_CS0# (for flash), SPI0_CS2# (for TPM).</p></entry></row></tbody></tgroup></table><table id="TABLE_7143FA18-8A83-41CC-BEA4-F40DFBC8BD14_2"><title>Max Number of vias</title><tgroup cols="4"><thead><row><entry>Signal Group</entry><entry>Max Number of Vias Allowed</entry><entry>Via Placement</entry><entry>Notes</entry></row></thead><tbody><row><entry><p>Rx, Tx</p></entry><entry><p>4</p></entry><entry><p>Total Channel</p></entry><entry><p>For operating frequency of 76.8 MHz. Via count can be increased to 6 max for 50 MHz.</p></entry></row></tbody></tgroup></table></section><section id="SECTION_E9916570-6640-49A9-942E-7FED2BA39477"><title>Segment Lengths for Maximum 50MHz</title><table id="TABLE_E9916570-6640-49A9-942E-7FED2BA39477_1"><title>SPI0 3-Load Branch (Device Down) with G3 Isolation FET of Flash and TPM Topology Segment Lengths for Maximum 50MHz Routing Guidelines</title><tgroup cols="3"><thead><row><entry>Segment</entry><entry>Tline Type</entry><entry>Max Length Segment (mm)</entry></row></thead><tbody><row><entry><p>BO</p></entry><entry><p>MS, DSL, SL</p></entry><entry><p>12.7</p></entry></row><row><entry><p>M1</p></entry><entry><p>MS, DSL, SL</p></entry><entry><p>109.22</p></entry></row><row><entry><p>M2</p></entry><entry><p>MS, DSL, SL</p></entry><entry><p>2.54</p></entry></row><row><entry><p>M3</p></entry><entry><p>MS, DSL, SL</p></entry><entry><p>2.54</p></entry></row><row><entry><p>M4</p></entry><entry><p>MS, DSL, SL</p></entry><entry><p>38.1</p></entry></row><row><entry><p>M5</p></entry><entry><p>MS, DSL, SL</p></entry><entry><p>76.2</p></entry></row><row><entry><p>M6</p></entry><entry><p>MS, DSL, SL</p></entry><entry><p>121.92</p></entry></row></tbody></tgroup></table><p>Min Length Total (mm): 50.8</p><p>Min Length Total Note: 1) Min length between CPU to the closest end device = 50.8 mm; 2) Min length on M1, M4 and M5 shall not be &lt; 12.7 mm.</p><p>Max Length Total (mm): 203.2</p><p>Max Length Total Note: 1) Max length between CPU to the furthest end device = 203.2 mm;​  2) Total topology length = 243.8 mm.</p></section><section id="SECTION_4E634244-760A-4D73-B7B7-6FE2DBEDE751"><title>Segment Lengths for Maximum 76.8MHz</title><table id="TABLE_4E634244-760A-4D73-B7B7-6FE2DBEDE751_1"><title>SPI0 3-Load Branch (Device Down) with G3 Isolation FET of Flash and TPM Topology Segment Lengths for Maximum 76.8MHz Routing Guidelines</title><tgroup cols="3"><thead><row><entry>Segment</entry><entry>Tline Type</entry><entry>Max Length Segment (mm)</entry></row></thead><tbody><row><entry><p>BO</p></entry><entry><p>MS, DSL, SL</p></entry><entry><p>12.7</p></entry></row><row><entry><p>M1</p></entry><entry><p>MS, DSL, SL</p></entry><entry><p>68.58</p></entry></row><row><entry><p>M2</p></entry><entry><p>MS, DSL, SL</p></entry><entry><p>2.54</p></entry></row><row><entry><p>M3</p></entry><entry><p>MS, DSL, SL</p></entry><entry><p>2.54</p></entry></row><row><entry><p>M4</p></entry><entry><p>MS, DSL, SL</p></entry><entry><p>15.24</p></entry></row><row><entry><p>M5</p></entry><entry><p>MS, DSL, SL</p></entry><entry><p>76.2</p></entry></row><row><entry><p>M6</p></entry><entry><p>MS, DSL, SL</p></entry><entry><p>81.28</p></entry></row></tbody></tgroup></table><p>Max Length Total (mm): 162.56</p><p>Max Length Total Note: 1) Max length between CPU to the furthest end device = 162.56 mm;​  2) Total topology length = 264.16 mm.</p></section></body></topic>